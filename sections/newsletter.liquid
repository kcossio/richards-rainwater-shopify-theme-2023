{{ 'component-newsletter.css' | asset_url | stylesheet_tag }}
{{ 'newsletter-section.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="newsletter footer-newsletter center {% if section.settings.full_width == false %}newsletter--narrow page-width{% endif %}">
  <?xml version="1.0" encoding="utf-8"?>
    <!-- Generator: Adobe Illustrator 27.5.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
    <svg version="1.1" id="cloud" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
       viewBox="0 0 808.3 327.6" enable-background="new 0 0 808.3 327.6" xml:space="preserve">
    <g>
      <defs>
        <path id="SVGID_1_" d="M332.3,86.4c-21.8-12.9-46.6-19.6-72-19.6c-68.4,0-126.3,49.1-145.3,116.7c-2.6-0.2-5.3-0.3-8-0.3
          C47.9,183,0,235.1,0,299.3c0,9.5,1.1,19,3.3,28.3h795.2c6.5-17.2,9.8-35.5,9.8-54c0-78.4-58.5-141.9-130.7-141.9
          c-6.5,0-13.1,0.5-19.5,1.6C632.7,55.6,564.4,0,484.1,0C421.2,0,365.6,34.2,332.3,86.4"/>
      </defs>
      <clipPath id="SVGID_00000018934444362100890190000000209370728294818495_">
        <use xlink:href="#SVGID_1_"  overflow="visible"/>
      </clipPath>
      
        <g id="Group_718" transform="translate(117.379 2.345)" clip-path="url(#SVGID_00000018934444362100890190000000209370728294818495_)">
        <path id="Path_808" fill="#FFA500" d="M693.8,342.3c-6,1.1-12,2.4-18,3.8c-42,9.9-81.9,27.2-117.9,50.9
          c-9.2-26.1-82.2-142.2-232.5-214.7c-85.9-41.5-212.6-44.7-379-13.8c0,0,5.7-2.4,16.2-6.1C43.9,133.7,415.9,26.1,695.9,342
          C695.2,342.1,694.5,342.2,693.8,342.3L693.8,342.3"/>
        <path id="Path_809" fill="#0040A8" d="M697.9,341.6C661,275,481.9-3.1,90.4,49.3C34.2,56.8-21.1,70.5-74.3,90.2
          c21-10,42.1-19.3,63.4-27.8c229.1-91.5,471.8-94.8,620.1-30.5c227.8,98.7,308.7,289.1,320.8,345.3
          C858.7,340.2,777.1,327.7,697.9,341.6"/>
        <path id="Path_810" fill="#FC4A6A" d="M141,258.7c-36.2-7-73.3-9.3-110.1-6.9c-278.3,17.6-440.6,219.8-530.7,400.4
          c-26.4,53.2-48.9,108.3-67.4,164.8c-20.6,62.8-30.2,108.4-32.3,119.3c0,0.1,0,0.2,0,0.2l0,0.1c-0.1,0.6-0.2,1.1-0.3,1.5
          c0,0.1,0,0.3-0.1,0.3l-0.1,0.4c0,0,0-0.2,0.1-0.7c0-0.1,0-0.2,0-0.3c0.1-1.2,0.5-3.5,0.9-6.8c10.5-71.6,101.3-609.6,545.3-762.6
          c160-55.2,291.5-24.2,379,13.8C486.5,252.3,548.7,370.9,557.9,397c-41.7,27.5-77.3,63.1-104.8,104.7
          C397,406.9,297.9,289.6,141,258.7"/>
        <path id="Path_811" fill="#DE0000" d="M-572.1,853c-0.3,0.9-0.6,1.7-0.9,2.6c-0.8,2.1-1.6,4.3-2.3,6.4l-0.1,0.2l-23,71.8l-0.9,2.8
          l-0.5,1.6l-0.1,0.3l-0.1,0.2l0.1-0.4c0-0.1,0-0.2,0.1-0.4c0.1-0.4,0.2-0.8,0.3-1.5l0-0.1c0-0.1,0-0.2,0-0.2
          c2.2-10.9,11.7-56.4,32.3-119.3c18.5-56.5,41-111.6,67.4-164.8c90.1-180.6,252.4-382.9,530.7-400.4c36.8-2.5,73.8-0.2,110.1,6.9
          c157,30.9,256,148.2,312.1,243c-0.4,0.6-0.8,1.1-1.1,1.6C-106.1,198-481.2,608.7-572.1,853"/>
        <path id="Path_812" fill="#0094DA" d="M695.9,342C415.9,26.1,43.9,133.7-37.5,162.4c-456.1,146.3-551,697.2-561.5,768.7
          c-0.5,3.3-0.8,5.6-0.9,6.8l0,0.3l-0.1,0.7l-0.1-2.1l0.2,1c1.1-88.9,11.7-170.8,30.1-246C-496,390.6-296.6,196.6-74.3,90.2
          C-21.1,70.5,34.2,56.8,90.4,49.3C481.9-3.1,661,275,697.9,341.6C697.2,341.8,696.6,341.9,695.9,342"/>
      </g>
    </g>
    </svg>
  
  <div class="newsletter__wrapper color-{{ section.settings.color_scheme }} gradient content-container isolate{% if section.settings.full_width %} content-container--full-width{% endif %} section-{{ section.id }}-padding">
    {%- for block in section.blocks -%}
      {%- case block.type -%}
        {%- when '@app' -%}
          {% render block %}
        {%- when 'heading' -%}
          <h2 class="inline-richtext {{ block.settings.heading_size }}" {{ block.shopify_attributes }}>
            {{ block.settings.heading }}
          </h2>
        {%- when 'paragraph' -%}
          <div class="newsletter__subheading rte" {{ block.shopify_attributes }}>{{ block.settings.text }}</div>
        {%- when 'email_form' -%}
          <div {{ block.shopify_attributes }}>
            {% form 'customer', class: 'newsletter-form' %}
              <input type="hidden" name="contact[tags]" value="newsletter">
              <div class="newsletter-form__field-wrapper">
                <div class="field">
                  <input
                    id="NewsletterForm--{{ section.id }}"
                    type="email"
                    name="contact[email]"
                    class="field__input"
                    value="{{ form.email }}"
                    aria-required="true"
                    autocorrect="off"
                    autocapitalize="off"
                    autocomplete="email"
                    {% if form.errors %}
                      autofocus
                      aria-invalid="true"
                      aria-describedby="Newsletter-error--{{ section.id }}"
                    {% elsif form.posted_successfully? %}
                      aria-describedby="Newsletter-success--{{ section.id }}"
                    {% endif %}
                    placeholder="{{ 'newsletter.label' | t }}"
                    required
                  >
                  <label class="field__label" for="NewsletterForm--{{ section.id }}">
                    {{ 'newsletter.label' | t }}
                  </label>
                  <button
                    type="submit"
                    class="newsletter-form__button field__button"
                    name="commit"
                    id="Subscribe"
                    aria-label="{{ 'newsletter.button_label' | t }}"
                  >
                    {% render 'icon-arrow' %}
                  </button>
                </div>
                {%- if form.errors -%}
                  <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
                    {%- render 'icon-error' -%}
                    {{- form.errors.translated_fields.email | capitalize }}
                    {{ form.errors.messages.email -}}
                  </small>
                {%- endif -%}
              </div>
              {%- if form.posted_successfully? -%}
                <h3
                  class="newsletter-form__message newsletter-form__message--success form__message"
                  id="Newsletter-success--{{ section.id }}"
                  tabindex="-1"
                  autofocus
                >
                  {% render 'icon-success' -%}
                  {{- 'newsletter.success' | t }}
                </h3>
              {%- endif -%}
            {% endform %}
          </div>
      {%- endcase -%}
    {%- endfor -%}
  </div>
</div>

{% schema %}
{
  "name": "t:sections.newsletter.name",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header"]
  },
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "background-1",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "background-2",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "background-1",
      "label": "t:sections.all.colors.label"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": true,
      "label": "t:sections.newsletter.settings.full_width.label"
    },
    {
      "type": "paragraph",
      "content": "t:sections.newsletter.settings.paragraph.content"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 52
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "t:sections.newsletter.blocks.heading.name",
      "limit": 1,
      "settings": [
        {
          "type": "inline_richtext",
          "id": "heading",
          "default": "Subscribe to our emails",
          "label": "t:sections.newsletter.blocks.heading.settings.heading.label"
        },
        {
          "type": "select",
          "id": "heading_size",
          "options": [
            {
              "value": "h2",
              "label": "t:sections.all.heading_size.options__1.label"
            },
            {
              "value": "h1",
              "label": "t:sections.all.heading_size.options__2.label"
            },
            {
              "value": "h0",
              "label": "t:sections.all.heading_size.options__3.label"
            }
          ],
          "default": "h1",
          "label": "t:sections.all.heading_size.label"
        }
      ]
    },
    {
      "type": "paragraph",
      "name": "t:sections.newsletter.blocks.paragraph.name",
      "limit": 1,
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Be the first to know about new collections and exclusive offers.</p>",
          "label": "t:sections.newsletter.blocks.paragraph.settings.paragraph.label"
        }
      ]
    },
    {
      "type": "email_form",
      "name": "t:sections.newsletter.blocks.email_form.name",
      "limit": 1
    },
    {
      "type": "@app"
    }
  ],
  "presets": [
    {
      "name": "t:sections.newsletter.presets.name",
      "blocks": [
        {
          "type": "heading"
        },
        {
          "type": "paragraph"
        },
        {
          "type": "email_form"
        }
      ]
    }
  ]
}
{% endschema %}
